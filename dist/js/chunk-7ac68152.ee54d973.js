(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7ac68152"],{"027f":function(t,e,r){"use strict";r("4d43")},"07a5":function(t,e,r){"use strict";r("b810")},"4d43":function(t,e,r){},6265:function(t,e,r){},"75d0":function(t,e,r){},8727:function(t,e,r){"use strict";r("6265")},"8c9a":function(t,e,r){},"8d8f":function(t,e,r){"use strict";r("75d0")},b810:function(t,e,r){},ce24:function(t,e,r){"use strict";r.r(e);var s={name:"TodoBar",data:function(){return{filters:[{id:"1",label:"所有任务",icon:"menu"},{id:"2",label:"规划中",icon:"clipboard"},{id:"3",label:"实现中",icon:"loader"},{id:"4",label:"已实现",icon:"code"},{id:"5",label:"已完成",icon:"check-square"}],tags:[{id:"6",label:"非常紧急",color:"danger"},{id:"7",label:"紧急",color:"warning"},{id:"8",label:"普通",color:"success"}]}},computed:{selectedKeys:function(){return this.$store.state.todo.barKey},isSideMenuOpened:function(){return this.$store.state.isSideMenuOpened}},methods:{onOpenDrawer:function(){this.$store.commit("todo/SET_TODO_DRAWER_STATUS",!0)},onClickMenuItem:function(t){var e=t.key;this.$store.commit("todo/SET_TODO_BAR_KEY",e)}}},a=(r("dac5"),r("2ca5")),n=Object(a.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("perfect-scrollbar",{staticClass:"select-none overflow-hidden",staticStyle:{height:"calc(100% - 88px)"},attrs:{options:{suppressScrollX:!0,maxScrollbarLength:160,wheelSpeed:.6}}},[r("a-menu",{staticClass:"todo-bar-menu",attrs:{mode:"inline","selected-keys":t.selectedKeys},on:{click:t.onClickMenuItem}},[r("a-menu-item",{staticClass:"m-0 bg-white cursor-default",attrs:{disabled:""}},[t._v(" 任务状态 ")]),t._l(t.filters,(function(e){var s=e.id,a=e.label,n=e.icon;return r("a-menu-item",{key:s},[r("div",{staticClass:"flex items-center"},[r("feather",{staticClass:"side-menu-icon anticon",attrs:{size:"20",type:n}}),r("span",{staticStyle:{"margin-top":"1px"}},[t._v(t._s(a))])],1)])})),r("a-menu-item",{staticClass:"mt-6 mb-0 bg-white cursor-default",attrs:{disabled:""}},[t._v(" 任务优先级 ")]),t._l(t.tags,(function(e){var s=e.id,a=e.label,n=e.color;return r("a-menu-item",{key:s},[r("div",{staticClass:"flex justify-between items-center"},[r("span",{staticStyle:{"margin-top":"1px"}},[t._v(t._s(a))]),r("div",{staticClass:"w-2 h-2 mr-2 rounded-full",class:"bg-"+n})])])}))],2)],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"px-6 pt-3 pb-2 justify-center items-center"},[e("h3",{staticClass:"section-card__title flex items-center text-xl"},[this._v(" 待办事项")])])}],!1,null,"39e985ec",null).exports,i=r("9139"),o=(r("6c00"),{name:"FlipList",props:{tag:{type:String,default:"ul"}}}),c=(r("07a5"),Object(a.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("transition-group",{attrs:{name:"flip-list",tag:this.tag}},[this._t("default")],2)}),[],!1,null,null,null).exports),l=r("bd40"),u=r("04ff"),d=r("8c48"),f=r("99dd"),m={name:"TodoList",components:{FlipList:c,Task:r("6f42").a},data:function(){return{showTask:!1,searchInputText:"搜索任务...",tags:{1:{text:"非常紧急",color:"danger"},2:{text:"紧急",color:"warning"},3:{text:"普通",color:"success"}}}},computed:{filterItems:function(){return this.$store.getters["todo/filterItems"]},currUserID:function(){return window.sessionStorage.getItem("currUserID")},currEditItem:function(){return this.$store.state.todo.currEditTodo},isDrawerOpened:function(){return this.$store.state.todo.isTodoDrawerOpened},currStage:function(){return this.$store.state.stage.currStage},currStageId:function(){return this.$store.state.stage.currStageId},currProjectID:function(){return this.$store.state.project.currProjectId}},watch:{showTask:function(){this.getTask()}},created:function(){this.getTask()},methods:{getTask:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.currUserID,e.next=3,Object(l.k)(r);case 3:return s=e.sent,a=s.data,t.$store.commit("todo/SET_TODO_LIST",a),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))()},showDetail:function(t){var e=this;return Object(i.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.$store.commit("task/SET_CURR_EDIT_TASK",t),r.next=3,e.getTaskDetail(t);case 3:return r.next=5,e.getDialog(t);case 5:return r.next=7,e.getComment(t);case 7:e.showTask=!0;case 8:case"end":return r.stop()}}),r)})))()},getComment:function(t){var e=this;return Object(i.a)(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s={source:"task",sid:t},r.next=3,Object(u.a)(s);case 3:return a=r.sent,n=a.data,e.$store.commit("task/SET_TASK_COMMENT",n),r.abrupt("return",!0);case 7:case"end":return r.stop()}}),r)})))()},getMemberList:function(){var t=this;return Object(i.a)(regeneratorRuntime.mark((function e(){var r,s,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.currProjectID,e.next=3,Object(f.a)(r);case 3:s=e.sent,a=s.data,t.$store.commit("team/SET_CURR_PROJECT_MEMBER_LIST",a);case 6:case"end":return e.stop()}}),e)})))()},getTaskDetail:function(t){var e=this;return Object(i.a)(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.currProjectID,r.next=3,Object(l.h)(s,t);case 3:return a=r.sent,n=a.data,e.$store.commit("task/SET_TASK_DETAIL",n),0!==n.detail.t_level&&e.$store.commit("task/SET_CURR_FATHER_TASK",n.parent[0]),r.abrupt("return",!0);case 8:case"end":return r.stop()}}),r)})))()},getDialog:function(t){var e=this;return Object(i.a)(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s={pid:e.currProjectID,source:"task",sid:t},r.next=3,Object(d.a)(s);case 3:return a=r.sent,n=a.data,e.$store.commit("task/SET_TASK_DIALOG",n),r.abrupt("return",!0);case 7:case"end":return r.stop()}}),r)})))()}}},p=(r("8727"),Object(a.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"relative"},[r("div",[r("a-input",{staticClass:"search-input",attrs:{size:"large",placeholder:t.searchInputText},on:{focus:function(e){t.searchInputText="请输入任务关键字..."},blur:function(e){t.searchInputText="搜索任务..."}},scopedSlots:t._u([{key:"prefix",fn:function(){return[r("feather",{attrs:{size:"20",type:"search"}})]},proxy:!0}])})],1),r("perfect-scrollbar",{staticClass:"todo-list",attrs:{options:{maxScrollbarLength:160,wheelSpeed:.6}}},[t.filterItems.length>0?r("flip-list",{staticStyle:{"min-width":"800px"}},t._l(t.filterItems,(function(e,s){return r("li",{key:s,staticClass:"todo-list__item",class:{"todo-list__item-active":e.id===t.currEditItem.id},on:{click:function(r){return t.showDetail(e.id)}}},[r("a-checkbox",{staticClass:"mr-4",on:{click:function(t){t.stopPropagation()}},model:{value:e.is_done,callback:function(r){t.$set(e,"is_done",r)},expression:"todo.is_done"}}),r("div",{staticClass:"mr-auto flex items-center flex-wrap"},[r("div",{staticClass:"flex-1 flex items-center select-none"},[r("a-tag",{attrs:{color:3===e.t_rank?"#ff5b5c":2===e.t_rank?"#fdac41":"#28c175"}},[r("span",{staticClass:"text-sm"},[t._v(" "+t._s(3===e.t_rank?"非常紧急":2===e.t_rank?"紧急":"普通"))])])],1)]),r("div",{staticClass:"flex-1 truncate todoItem",class:{done:e.is_done}},[t._v(t._s(e.t_title)+" "),r("span",{staticClass:"ml-4 text-base",staticStyle:{color:"#b7b8bb"}},[t._v(t._s(e.t_content))])]),r("div",{staticClass:"ml-auto flex items-center flex-wrap",staticStyle:{color:"#b7b8bb"}},[t._v(" 截止日期："+t._s(t._f("dateFormat")(e.end_time))+" ")])],1)})),0):r("a-empty",{staticClass:"h-full flex flex-col justify-center items-center"})],1),r("task",{attrs:{"pop-visible":t.showTask,detail:"detailTaskId"},on:{close:function(e){t.showTask=!1}}})],1)}),[],!1,null,"1709ec9e",null).exports),_=(r("b8fb"),{name:"TodoDrawer",computed:{isTodoDrawerOpened:function(){return this.$store.state.todo.isTodoDrawerOpened}},data:function(){return{currTodo:{}}},watch:{},methods:{onCloseDrawer:function(){this.$store.commit("todo/SET_TODO_DRAWER_STATUS",!1)}}}),h=(r("027f"),{name:"Todo",components:{TodoBar:n,TodoList:p,TodoDrawer:Object(a.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a-drawer",{staticClass:"relative",attrs:{width:"400",closable:!1,mask:!1,"get-container":!1,"wrap-style":{position:"absolute"},visible:t.isTodoDrawerOpened},scopedSlots:t._u([{key:"title",fn:function(){return[r("div",{staticClass:"flex items-center"},[t.currTodo.title?r("div",{staticClass:"px-6 py-2 flex items-center primary hover:text-white bg-primary-light hover:bg-primary transition rounded-md text-sm cursor-pointer",on:{click:function(e){return t.$message.success("已完成一项任务，太棒了！")}}},[r("feather",{staticClass:"mr-1",attrs:{size:"18",type:"check"}}),t._v(" 设为已完成 ")],1):t._e(),r("div",{staticClass:"ml-auto flex items-center text-gray-600"},[r("feather",{staticClass:"ml-2 cursor-pointer",attrs:{size:"18",type:"link"}}),r("a-dropdown",{attrs:{trigger:["click"]},scopedSlots:t._u([{key:"overlay",fn:function(){return[r("a-menu",t._l([{text:"添加到其他项目"},{text:"复制为新任务"},{text:"丢弃该任务"}],(function(e,s){var a=e.text;return r("a-menu-item",{key:s,staticClass:"text-center text-sm text-gray-700",on:{click:function(e){return t.$message.success(a)}}},[t._v(" "+t._s(a)+" ")])})),1)]},proxy:!0}])},[r("feather",{staticClass:"ml-2 cursor-pointer",attrs:{size:"20",type:"more-vertical"}})],1),r("feather",{staticClass:"ml-2 cursor-pointer",attrs:{size:"21",type:"x"},on:{click:t.onCloseDrawer}})],1)])]},proxy:!0}])},[r("div",{staticClass:"sec"},[r("h4",{staticClass:"sec__title"},[t._v("标题信息")]),r("a-textarea",{attrs:{placeholder:"请输入标题信息","auto-size":{minRows:2,maxRows:6}},model:{value:t.currTodo.title,callback:function(e){t.$set(t.currTodo,"title",e)},expression:"currTodo.title"}})],1),r("div",{staticClass:"sec"},[r("h4",{staticClass:"sec__title"},[t._v("任务周期")]),r("a-range-picker",{staticClass:"w-full",model:{value:t.currTodo.date,callback:function(e){t.$set(t.currTodo,"date",e)},expression:"currTodo.date"}})],1),r("div",{staticClass:"sec"},[r("h4",{staticClass:"sec__title"},[t._v("任务标签")]),r("a-select",{staticClass:"w-full text-base",attrs:{mode:"tags",size:"large",placeholder:"请选择任务标签（可选）"},model:{value:t.currTodo.tag,callback:function(e){t.$set(t.currTodo,"tag",e)},expression:"currTodo.tag"}},t._l([{id:"1",label:"前端开发"},{id:"2",label:"后端开发"},{id:"3",label:"UI 设计"},{id:"4",label:"架构设计"}],(function(e){var s=e.id,a=e.label;return r("a-select-option",{key:s},[t._v(" "+t._s(a)+" ")])})),1)],1),r("div",{staticClass:"absolute right-0 bottom-0 mr-3 mb-3"},[r("a-button",{attrs:{type:"primary"},on:{click:t.onCloseDrawer}},[t._v(" "+t._s(t.currTodo.title?"完成编辑":"创建任务")+" ")])],1)])}),[],!1,null,"23db9c71",null).exports}}),b=(r("8d8f"),Object(a.a)(h,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"todo-app"},[e("div",{staticClass:"left"},[e("todo-bar",{staticClass:"h-full"})],1),e("div",{staticClass:"right"},[e("todo-list",{staticClass:"h-full"})],1),e("todo-drawer")],1)}),[],!1,null,"3301f4fb",null));e.default=b.exports},dac5:function(t,e,r){"use strict";r("8c9a")}}]);